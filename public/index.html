<!DOCTYPE html>
<html ng-app="MyApp" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Cohort Sort</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js" charset="utf-8"></script>
  <script src="/js/app.js" charset="utf-8"></script>
</head>
<body ng-controller="MainController as main">
  <h1>Welcome</h1>
  <div>
      <div ng-if="!(main.loggedInUser)">
        <h2>Create User</h2>
        <form ng-submit="main.createUser()">
            <input type="text" ng-model="main.newUsername"/>
            <input type="password" ng-model="main.newPassword"/>
            <input type="submit" value="Create User"/>
        </form>
        <h2>Log In</h2>
        <form ng-submit="main.logIn()">
            <input type="text" ng-model="main.username"/>
            <input type="password" ng-model="main.password"/>
            <input type="submit" value="Log In"/>
        </form>
      </div>
      <div ng-if="main.loggedInUser && !main.boardClicked">
        <h2>Hey {{main.loggedInUser.username}}</h2>
        <form ng-submit="main.createBoard()">
            <input type="text" ng-model="main.title" placeholder="Board Name"/>
            <input type="submit" value="Create Board"/>
        </form>
        <button ng-click="main.logOut()">Log Out</button>
      </div>
      <div ng-repeat="board in main.boards" ng-if="main.loggedInUser && !main.boardClicked">
        <div>
          <a href="#" ng-click="main.showBoard(board._id)"><h2>{{board.title}}</h2></a>
        </div>
      </div>
      <div ng-if="main.boardClicked === true">
        <h1>{{main.currentBoard.title}}</h1>
        <form ng-submit="main.createList()">
            <input type="text" ng-model="main.listTitle" placeholder="list title"/>
            <input type="submit" value="Create List"/>
        </form>
        <div ng-repeat="list in main.lists">
            <div>
                <h3>{{list.listTitle}}</h3>
                <button ng-click="main.deleteList(list._id)">X</button>
                <div ng-repeat="task in main.tasks | filter:list._id">
                  <div ng-repeat="button in main.lists" ng-if="main.taskBeingEdited">
                    <button ng-click="main.currentList = button._id; main.moveTask()">{{button.listTitle}}</button>
                  </div>
                  <p>{{task.taskDescription}}</p>
                  <button>Edit</button>
                  <button ng-click="main.taskBeingEdited = task._id; main.checkID(task._id)">=></button>
                  <button ng-click="main.deleteTask(task._id)">X</button>
                </div>
                <button ng-click="main.indexOfCreateTaskForm = $index" ng-if="!(main.addButtonClicked)">ADD</button>
                <form ng-submit="main.createTask(list._id)" ng-if="$index === main.indexOfCreateTaskForm">
                  <input type="text" ng-model="main.taskDescription" />
                  <input ng-click="$index = null" type="submit" value="Create Task" />
                </form>
            </div>
        </div>
      </div>
  </div>
</body>
</html>
